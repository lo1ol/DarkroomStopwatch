# Простой таймер/секундомер для даркрума

## Основные принципы

1. Энергоэффективность: если таймер не трогать, то он переходит в режим сна. В режиме сна таймер совсем не потребляет энергии (0.3 мA). И может пролежать так год. При этом в обычном режиме таймер потребляет мало энергии (в среднем около 2.5 мА)
2. Подсветка дисплея: используется LED дисплей в минимальной режиме яркости. Этого должно быть более чем достаточно для удобного просмотра времени при красном свете
3. Простота: есть 2 кнопки и энкодер (одна кнопка на энкодере). Они интуитивно понятны -- обычная кнопка старта/паузы, кнопка на энкодере -- переход. Удержание кнопки на энкодере -- сброс. Удержание кнопки старта -- выключение дисплея
4. Быстрота установки времени: минуты и секунды выстанавливаются отдельно и в любом направлении с помощью энкодера. Это позволяет выставить любое время за несколько секунд
5. Возможность выставить предварительное напоминание: чтобы вы приготовились вытаскивать лист из кюветы -- есть предварительный пик (по умолчанию 0 секунд -- выкл)
6. Долгое напоминание при установке таймера на долгое время: таймер: при установке таймера более чем на 20 минут -- таймер будет пищать 30 секунд. Есть возможность зафорсировать это поведение
7. Есть возможность поставить напоминания на каждую минуту работы таймера (удобно при проявке пленки, для напоминания об агитации)
8. Есть режим настроек, который сбрасывается после часа простоя

## Режимы

Eсть 4 режима: режим установки времени, режим запущенного таймера, режим запущенного секундомера, режим остановленного секундомера, режим настроек

* Во всех режимах удержание кнопки старта приводит к отключение дисплея. В режиме остановки секундомера и установки времени и установки настроек устройство уходит в сон. Включить дисплей и выйти из сна можно по нажатию любой кнопки или вращению энкодера

### Режим установки времени

Можно распознать по тому, что в нем мигает время

* Крутилка на энкодере меняет время
* Нажатие на энкодер переключает смену между минутами и секундами
* Удержание энкодера сбрасывает установку в 0
* Нажатие на кнопку старт при 0 запускает секундомер, не на 0 -- таймер
* Удержание энкодера и кнопки старта переходит в режим настроек

### Режим запущенного таймера

Можно распознать по тому, что в нем время идет назад

* Удержание энкодера сбрасывает таймер в значение с которого он был запущен
* Остальные нажатия игнорируются


### Режим запущенного секундомера

Можно распознать по тому, что в нем время идет вперед.
    
* Нажатие на старт стопает секундомер
* Удержание энкодера сбрасывает таймер в 0
* Работает максимум 1 час

### Режим остановленного секундомера

Можно распознать по тому, что в нем мигает двоеточие

* Крутилка на энкодере и нажатие на энкодере переключает нас в режим установки времени (с того времени на котором мы остановились)
* Нажатие на старт продолжает работу секундомера
* Удержание энкодера сбрасывает таймер в 0

### Режим настроек

Можно распознать по тому, что в левой части экрана показываются не цифры: `PN`: Set pre notify time, `LN`: Force long notify, `EN`: Every minute notify

* Крутилка на энкодере меняет значение.
* Клик на энкодере сбрасывает значение в дефолтное
* Удержание на энкодере сбрасывает все значения на дефолтные
* Нажатие на старт переключает на установку следующей настройки
* Удержания кнопки старта и энкодера возвращает нас в режим установки времени
